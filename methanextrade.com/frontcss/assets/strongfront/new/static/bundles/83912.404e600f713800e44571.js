"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[83912],{583912:(e,t,i)=>{i.d(t,{linking:()=>m});var s=i(12481),n=i(650151),r=i(129025),a=(i(77122),i(223699)),o=i(444331),l=i(201089),u=i(62802),h=i(588948),d=i(776734),c=i(707621),_=i(912445);const y=(0,l.getLogger)("Linking");class b{constructor(e,t,i){this.watchedSymbol=new r.WatchedValue,this.seriesShortSymbol=new r.WatchedValue,this.proSymbol=new r.WatchedValue,this.ensuredProSymbol=new r.WatchedValue,this.watchedInterval=new r.WatchedValue,this.watchedIntraday=new r.WatchedValue,this.watchedSeconds=new r.WatchedValue,this.watchedTicks=new r.WatchedValue,this.watchedDataFrequencyResolution=new r.WatchedValue,this.watchedRange=new r.WatchedValue,this.watchedSupportedResolutions=new r.WatchedValue,this.watchedSupportedChartStyles=new r.WatchedValue,this.symbolNamesList=new r.WatchedValue,this._chartWidgetCollection=null,this._chartWidgetBindingState=0,this._activeChartWidget=null,this._linkingGroupCharts=null,this._boundChartWidget=null,this._watchedSymbolListenerBound=this._watchedSymbolListener.bind(this),this._watchedIntervalListenerBound=this._watchedIntervalListener.bind(this),this._muted=!1,this.updateBoundChartWidget=()=>{const e=this._chartToBind();e!==this._boundChartWidget&&(null===e?this.unbindFromChartWidget():this.bindToChartWidget(e))},this._updateAllGroupChartWidgets=()=>{var e;null===(e=this._destroySymbolIntervalPropertySubscriptions)||void 0===e||e.call(this);const t=(0,n.ensureNotNull)(this._linkingGroupCharts).value(),i=[],s=[];for(const e of t){const t=e.symbolWV().spawn(),n=e.resolutionWV().spawn();t.subscribe(this._updateSymbolByProperty.bind(this,e)),n.subscribe(this._updateIntervalByProperty.bind(this,e)),i.push(t),s.push(n)}this._destroySymbolIntervalPropertySubscriptions=()=>{i.forEach((e=>e.destroy())),s.forEach((e=>e.destroy())),this._destroySymbolIntervalPropertySubscriptions=void 0};const r=this.watchedSymbol.value();t.length>1&&this._needApplySymbol(r)&&!this._muted&&this._setGroupSymbol(r);const a=this.watchedInterval.value();t.length>1&&this._needApplyInterval(a)&&!this._muted&&this._setGroupInterval(a),this.updateBoundChartWidget()},this._groupIndex=e;const s=(e,t)=>{e.subscribe((e=>{i()===this&&t.setValue(e)}),{callWithLast:!0})};s(this.watchedSymbol,t.watchedSymbol),s(this.seriesShortSymbol,t.seriesShortSymbol),s(this.proSymbol,t.proSymbol),s(this.ensuredProSymbol,t.ensuredProSymbol),s(this.watchedInterval,t.watchedInterval),s(this.watchedIntraday,t.watchedIntraday),s(this.watchedSeconds,t.watchedSeconds),s(this.watchedTicks,t.watchedTicks),s(this.watchedDataFrequencyResolution,t.watchedDataFrequencyResolution),s(this.watchedRange,t.watchedRange),s(this.watchedSupportedResolutions,t.watchedSupportedResolutions),s(this.watchedSupportedChartStyles,t.watchedSupportedChartStyles),s(this.symbolNamesList,t.symbolNamesList),this.watchedSymbol.subscribe((e=>{this._boundChartWidget&&this._boundChartWidget.hasModel()&&this._mainSeries().symbolSameAsCurrent(e)||this.proSymbol.setValue(e)}),{callWithLast:!0
})}mute(e){this._muted=e}bindToChartWidgetCollection(e){this.unbindFromChartWidgetCollection(),this._chartWidgetCollection=e,this._activeChartWidget=e.activeChartWidget.spawn(),this._activeChartWidget.subscribe(this.updateBoundChartWidget),this._linkingGroupCharts=e.linkingGroupsCharts(this._groupIndex).spawn(),this._linkingGroupCharts.subscribe(this._updateAllGroupChartWidgets),this.updateBoundChartWidget(),this._updateAllGroupChartWidgets()}unbindFromChartWidgetCollection(){var e,t,i;this.unbindFromChartWidget(),this._chartWidgetCollection=null,null===(e=this._activeChartWidget)||void 0===e||e.destroy(),this._activeChartWidget=null,null===(t=this._linkingGroupCharts)||void 0===t||t.destroy(),this._linkingGroupCharts=null,null===(i=this._destroySymbolIntervalPropertySubscriptions)||void 0===i||i.call(this)}bindToChartWidget(e){if(this.unbindFromChartWidget(),this._boundChartWidget=e,e.hasModel())return void this._onChartModelCreated(e.model());e.modelCreated().subscribe(this,this._onChartModelCreated,!0),this._chartWidgetBindingState=1;const t=e.properties().childs().mainSeriesProperties.childs();this.watchedSymbol.setValue(t.symbol.value()),this.watchedInterval.setValue(t.interval.value()),this._boundChartWidget.linkingGroupIndex().subscribe(this.updateBoundChartWidget)}unbindFromChartWidget(){const e=this._boundChartWidget;if(null!==e){switch(this._chartWidgetBindingState){case 1:e.modelCreated().unsubscribeAll(this);break;case 2:this.watchedSymbol.unsubscribe(this._watchedSymbolListenerBound);const t=this._mainSeries().dataEvents();t.symbolResolved().unsubscribeAll(this),t.symbolError().unsubscribeAll(this),this.watchedInterval.unsubscribe(this._watchedIntervalListenerBound),delete this.watchedSymbol.writeLock}e.linkingGroupIndex().unsubscribe(this.updateBoundChartWidget),this._boundChartWidget=null,this._chartWidgetBindingState=0}}boundChartWidget(){return this._boundChartWidget}_mainSeries(){if(!this._boundChartWidget)throw new Error("ChartWidget is undefined");return this._boundChartWidget.model().mainSeries()}_watchedSymbolListener(e){this._needApplySymbol(e)&&!this._muted&&(this._setGroupSymbol(e),this._sendSnowplowAnalytics())}_updateSymbolByProperty(e,t){const i=this._symbolLock();i&&this._needApplySymbol(t)&&!this._muted&&this._setGroupSymbol(t),(i||e===this._boundChartWidget)&&this.watchedSymbol.setValue(t)}_watchedIntervalListener(e){const t=a.Interval.normalize(e);t&&this._needApplyInterval(t)&&!this._muted&&this._setGroupInterval(t)}_updateIntervalByProperty(e,t){const i=this._intervalLock(),s=a.Interval.normalize(t);i&&s&&this._needApplyInterval(s)&&!this._muted&&this._setGroupInterval(s),(i||e===this._boundChartWidget)&&this.watchedInterval.setValue(null!=s?s:t)}_sendSnowplowAnalytics(){if(window.user.do_not_track)return;const e=this._mainSeries(),t=()=>{e.dataEvents().symbolResolved().unsubscribe(this,i)},i=i=>{(0,d.getTracker)().then((e=>{if(null===e)return;const t=(0,n.ensureNotNull)(this._chartWidgetCollection),s=t.layout.value(),r=t.metaInfo.uid.value()||""
;e.trackChartSymbols(i.pro_name,i.type,s,r)})),e.dataEvents().symbolError().unsubscribe(this,t)};e.dataEvents().symbolResolved().subscribe(this,i,!0),e.dataEvents().symbolError().subscribe(this,t,!0)}_updateSeriesSymbolInfo(){this.seriesShortSymbol.setValue((0,n.ensureNotNull)(this._boundChartWidget).getSymbol(!0));const e=this._mainSeries().symbolInfo();if(e){const t=e.pro_name||!1;this.proSymbol.setValue(t||this.watchedSymbol.value()),this.ensuredProSymbol.setValue(this.proSymbol.value()),e.aliases&&this.symbolNamesList.setValue(e.aliases);let i=(0,c.allChartStyles)();(0,o.isCloseBasedSymbol)(e)&&(i=i.filter((e=>(0,o.isSingleValueBasedStyle)(e)))),this.watchedSupportedChartStyles.setValue(i),this.watchedIntraday.setValue(!!e.has_intraday),this.watchedSeconds.setValue(!!e.has_seconds),this.watchedTicks.setValue(!(0,o.isCloseBasedSymbol)(e)&&!!e["is-tickbars-available"]),this.watchedRange.setValue(!(0,o.isCloseBasedSymbol)(e));const s=e.data_frequency?e.data_frequency:void 0;this.watchedDataFrequencyResolution.setValue(s)}else this.watchedIntraday.setValue(!1),this.watchedSeconds.setValue(!1),this.watchedTicks.setValue(!1),this.watchedRange.setValue(!1),this._mainSeries().isFailed()&&this.ensuredProSymbol.setValue(this.proSymbol.value())}_onChartModelCreated(e){if(!this._boundChartWidget)throw new Error("ChartWidget is undefined");this._chartWidgetBindingState=2,this.watchedSymbol.setValue(this._boundChartWidget.symbolWV().value()),this.watchedSymbol.subscribe(this._watchedSymbolListenerBound);const t=e.mainSeries().dataEvents();t.symbolResolved().subscribe(this,this._updateSeriesSymbolInfo),t.symbolError().subscribe(this,this._updateSeriesSymbolInfo),this._updateSeriesSymbolInfo(),this.watchedInterval.setValue(this._boundChartWidget.resolutionWV().value()),this.watchedInterval.subscribe(this._watchedIntervalListenerBound),this._boundChartWidget.readOnly()&&(this.watchedSymbol.writeLock=!0)}_chartToBind(){var e;const t=this._chartWidgetCollection;return null===t?null:t.activeChartWidget.value().linkingGroupIndex().value()===this._groupIndex?t.activeChartWidget.value():null!==this._boundChartWidget&&this._boundChartWidget.linkingGroupIndex().value()===this._groupIndex?this._boundChartWidget:null!==(e=t.getAll().find((e=>e.linkingGroupIndex().value()===this._groupIndex)))&&void 0!==e?e:null}_symbolLock(){var e;return!!(null===(e=this._chartWidgetCollection)||void 0===e?void 0:e.lock.symbol.value())}_intervalLock(){var e;return!!(null===(e=this._chartWidgetCollection)||void 0===e?void 0:e.lock.interval.value())}_chartsForLock(e){return(0===e?this._symbolLock():this._intervalLock())?(0,n.ensureNotNull)(this._linkingGroupCharts).value():this._boundChartWidget?[this._boundChartWidget]:[]}_setGroupSymbol(e){this.mute(!0),this._symbolLock()?(0,n.ensureNotNull)(this._chartWidgetCollection).setSymbol(e,this._groupIndex):(0,n.ensureNotNull)(this._boundChartWidget).setSymbol(e),this.mute(!1)}_needApplySymbol(e){
const t=this._chartsForLock(0),i=t.find((t=>t.hasModel()&&t.model().mainSeries().symbolInfo()&&t.model().mainSeries().symbolSameAsResolved(e)));if(i){const e=i.model().mainSeries();if(t.every((t=>e.symbolSameAsResolved(t.symbolWV().value()))))return!1}return t.some((t=>t.symbolWV().value()!==e))}_setGroupInterval(e){this.mute(!0),this._intervalLock()?(0,n.ensureNotNull)(this._chartWidgetCollection).setResolution(e,this._groupIndex):(0,n.ensureNotNull)(this._boundChartWidget).setResolution(e),this.mute(!1)}_needApplyInterval(e){return this._chartsForLock(1).some((t=>!a.Interval.isEqual(t.resolutionWV().value(),e)))}}const m=new class{constructor(){this._watchedSymbol=new r.WatchedValue,this._seriesShortSymbol=new r.WatchedValue,this._proSymbol=new r.WatchedValue,this._ensuredProSymbol=new r.WatchedValue,this._watchedInterval=new r.WatchedValue,this._watchedIntraday=new r.WatchedValue,this._watchedSeconds=new r.WatchedValue,this._watchedTicks=new r.WatchedValue,this._watchedDataFrequencyResolution=new r.WatchedValue,this._watchedRange=new r.WatchedValue,this._watchedSupportedResolutions=new r.WatchedValue,this._watchedSupportedChartStyles=new r.WatchedValue([]),this._symbolNamesList=new r.WatchedValue,this._chartWidgetCollection=null,this._onSymbolLinkBound=this._onSymbolLink.bind(this),this._searchCharts=null,this._searchChartsLoadDebounced=null,this._selfEmit=!1,this._preventFeedBySymbol=!1,this._feedBySymbolDebounceCounter=0,this._linkingGroups=new Map,this._activeLinkingGroup=new r.WatchedValue,this._activeLinkingGroupIndex=null,this._updateLinkingGroups=()=>{(0,n.ensureNotNull)(this._chartWidgetCollection).allLinkingGroups().value().forEach((e=>this._linkingGroup(e))),this._linkingGroups.forEach((e=>e.updateBoundChartWidget()))},this._activeLinkingGroup.setValue(this._linkingGroup(null));const e=(e,t)=>{e.subscribe((e=>t().setValue(e)),{callWithLast:!0})};e(this._watchedSymbol,(()=>this._activeLinkingGroup.value().watchedSymbol)),e(this._seriesShortSymbol,(()=>this._activeLinkingGroup.value().seriesShortSymbol)),e(this._proSymbol,(()=>this._activeLinkingGroup.value().proSymbol)),e(this._ensuredProSymbol,(()=>this._activeLinkingGroup.value().ensuredProSymbol)),e(this._watchedInterval,(()=>this._activeLinkingGroup.value().watchedInterval)),e(this._watchedIntraday,(()=>this._activeLinkingGroup.value().watchedIntraday)),e(this._watchedSeconds,(()=>this._activeLinkingGroup.value().watchedSeconds)),e(this._watchedTicks,(()=>this._activeLinkingGroup.value().watchedTicks)),e(this._watchedDataFrequencyResolution,(()=>this._activeLinkingGroup.value().watchedDataFrequencyResolution)),e(this._watchedRange,(()=>this._activeLinkingGroup.value().watchedRange)),e(this._watchedSupportedResolutions,(()=>this._activeLinkingGroup.value().watchedSupportedResolutions)),e(this._watchedSupportedChartStyles,(()=>this._activeLinkingGroup.value().watchedSupportedChartStyles)),e(this._symbolNamesList,(()=>this._activeLinkingGroup.value().symbolNamesList));const t=e=>{this._watchedSymbol.setValue(e.watchedSymbol.value()),
this._seriesShortSymbol.setValue(e.seriesShortSymbol.value()),this._proSymbol.setValue(e.proSymbol.value()),this._ensuredProSymbol.setValue(e.ensuredProSymbol.value()),this._watchedInterval.setValue(e.watchedInterval.value()),this._watchedIntraday.setValue(e.watchedIntraday.value()),this._watchedSeconds.setValue(e.watchedSeconds.value()),this._watchedTicks.setValue(e.watchedTicks.value()),this._watchedDataFrequencyResolution.setValue(e.watchedDataFrequencyResolution.value()),this._watchedRange.setValue(e.watchedRange.value()),this._watchedSupportedResolutions.setValue(e.watchedSupportedResolutions.value()),this._watchedSupportedChartStyles.setValue(e.watchedSupportedChartStyles.value()),this._symbolNamesList.setValue(e.symbolNamesList.value())};this._activeLinkingGroup.subscribe(t),t(this._activeLinkingGroup.value()),(0,_.setMuteLinkingGroup)(((e,t)=>{this._linkingGroup(e).mute(t)}))}get symbol(){return this._watchedSymbol}get proSymbol(){return this._proSymbol.readonly()}get ensuredProSymbol(){return this._ensuredProSymbol.readonly()}get symbolNamesList(){return this._symbolNamesList.readonly()}get seriesShortSymbol(){return this._seriesShortSymbol.readonly()}get interval(){return this._watchedInterval}get intraday(){return this._watchedIntraday.readonly()}get seconds(){return this._watchedSeconds.readonly()}get ticks(){return this._watchedTicks.readonly()}get range(){return this._watchedRange.readonly()}get supportedResolutions(){return this._watchedSupportedResolutions.readonly()}get supportedChartStyles(){return this._watchedSupportedChartStyles.readonly()}get preventFeedBySymbol(){return this._preventFeedBySymbol}get dataFrequencyResolution(){return this._watchedDataFrequencyResolution.readonly()}activeLinkingGroup(){return this._activeLinkingGroup.readonly()}getChartWidget(){return this.activeLinkingGroup().value().boundChartWidget()}bindToChartWidgetCollection(e){var t;null===(t=this._chartWidgetCollection)||void 0===t||t.onAboutToBeDestroyed.unsubscribeAll(this),this._unbindFromChartWidgetCollection(),this._chartWidgetCollection=e,this._chartWidgetCollection.onAboutToBeDestroyed.subscribe(this,this._unbindFromChartWidgetCollection),this._chartWidgetCollection.allLinkingGroups().subscribe(this._updateLinkingGroups),this._updateLinkingGroups(),this._activeLinkingGroupIndex=e.activeLinkingGroup().spawn(),this._activeLinkingGroupIndex.subscribe((e=>{this._activeLinkingGroup.setValue(this._linkingGroup(e))}),{callWithLast:!0}),this._linkingGroups.forEach((t=>t.bindToChartWidgetCollection(e)))}bindToSearchCharts(e){this.unbindFromSearchCharts(),this._searchCharts=e,e.onSearchBySymbol.subscribe(this,this._onSearchBySymbol),e.loadingSymbol.subscribe((e=>{!1===e&&(this._feedBySymbolDebounceCounter=0)})),this._watchedSymbol.subscribe(this._onSymbolLinkBound)}unbindFromSearchCharts(){this._searchCharts&&(this._searchCharts.onSearchBySymbol.unsubscribe(this,this._onSearchBySymbol),this._watchedSymbol.unsubscribe(this._onSymbolLinkBound),this._searchCharts=null)}setPreventFeedBySymbol(e){this._preventFeedBySymbol=e}
setSymbolAndLogInitiator(e,t,i){(this.symbol.value()!==e||i)&&(y.logInfo(`Change linking symbol to ${e}, initiator: ${t}`),this.symbol.setValue(e,i))}_onSearchBySymbol(e){if(!e.resolved_symbol)throw new Error("no resolved_symbol");this._selfEmit=!0,this._watchedSymbol.setValue(e.resolved_symbol),this._selfEmit=!1}_onSymbolLink(e){if(!this._selfEmit){if(!this._searchCharts){const e="No search charts defined";throw y.logError(e),new Error(e)}this._preventFeedBySymbol||this._loadSearchCharts(e)}}_loadSearchCharts(e){if(!this._searchCharts){const e="No search charts defined";throw y.logError(e),new Error(e)}if(this._searchChartsLoadDebounced)return void(this._feedBySymbolDebounceCounter<100&&(this._feedBySymbolDebounceCounter++,this._searchChartsLoadDebounced(e)));const t=e=>this._searchCharts?(!0===this._searchCharts.loadingSymbol.value()?this._feedBySymbolDebounceCounter<100&&(this._feedBySymbolDebounceCounter++,this._searchChartsLoadDebounced=(0,s.default)(t,2e3),this._searchChartsLoadDebounced(e)):this._searchChartsLoadDebounced=null,this._searchCharts.feedBySymbol.call(this._searchCharts,e)):()=>{};!0===this._searchCharts.loadingSymbol.value()?this._feedBySymbolDebounceCounter<100&&(this._feedBySymbolDebounceCounter++,this._searchChartsLoadDebounced=(0,s.default)(t,2e3),this._searchChartsLoadDebounced(e)):this._searchCharts.feedBySymbol(e)}_linkingGroup(e){let t=this._linkingGroups.get(e);if(void 0===t){const i={watchedSymbol:this._watchedSymbol,seriesShortSymbol:this._seriesShortSymbol,proSymbol:this._proSymbol,ensuredProSymbol:this._ensuredProSymbol,watchedInterval:this._watchedInterval,watchedIntraday:this._watchedIntraday,watchedSeconds:this._watchedSeconds,watchedTicks:this._watchedTicks,watchedDataFrequencyResolution:this._watchedDataFrequencyResolution,watchedRange:this._watchedRange,watchedSupportedResolutions:this._watchedSupportedResolutions,watchedSupportedChartStyles:this._watchedSupportedChartStyles,symbolNamesList:this._symbolNamesList};t=new b(e,i,(()=>this._activeLinkingGroup.value())),this._linkingGroups.set(e,t),this._chartWidgetCollection&&t.bindToChartWidgetCollection(this._chartWidgetCollection)}return t}_unbindFromChartWidgetCollection(){var e;null!==this._chartWidgetCollection&&(null===(e=this._activeLinkingGroupIndex)||void 0===e||e.destroy(),this._activeLinkingGroupIndex=null,this._linkingGroups.forEach((e=>e.unbindFromChartWidgetCollection())),this._chartWidgetCollection.allLinkingGroups().unsubscribe(this._updateLinkingGroups),this._chartWidgetCollection=null)}};{const e=(0,h.getFreshInitData)().symbolInfo,t=e?e.pro_symbol:u.getValue("editchart.model.symbol",window.DEFAULT_SYMBOL);m.setSymbolAndLogInitiator(t,"initial data")}window.TradingViewApi||(window.TradingViewApi={linking:m})},912445:(e,t,i)=>{let s;function n(e,t){null==s||s(e,t)}function r(e){s=e}i.d(t,{muteLinkingGroup:()=>n,setMuteLinkingGroup:()=>r})},66732:(e,t,i)=>{i.d(t,{combine:()=>a,combineWithFilteredUpdate:()=>r});var s=i(129025);function n(e,t,...i){
const n=(...t)=>e(...t.map((e=>e.value()))),r=new s.WatchedValue(n(...i)),a=()=>{t(...i.map((e=>e.value())))&&r.setValue(n(...i))},o=i.map((e=>e.spawn()));for(const e of o)e.subscribe(a);return r.readonly().spawn((()=>{o.forEach((e=>e.destroy())),i.forEach((e=>e.release()))}))}function r(e,t,...i){return n(e,t,...i)}function a(e,...t){return n(e,(()=>!0),...t)}},181728:(e,t,i)=>{function s(e,t){return!!(null==t?void 0:t.includes("cfd"))&&["commodity","futures","index","stock","fund"].includes(e)}function n(e,t){return"futures"===e&&void 0!==t&&!t.includes("cfd")}function r(e,t){return"stock"===e&&void 0!==t&&!t.includes("cfd")}function a(e,t){return void 0!==t&&("index"===e&&!t.includes("cfd")||"fundamental"===e&&t.includes("crypto"))}function o(e){return void 0!==e&&e.includes("crypto")}i.d(t,{isCFDSymbol:()=>s,isCryptoSymbol:()=>o,isFuturesSymbol:()=>n,isIndexSymbol:()=>a,isStockSymbol:()=>r})},707621:(e,t,i)=>{i.d(t,{allChartStyles:()=>r});var s=i(77122),n=i(125226);function r(){return function(){const e=[0,1,9,13,2,14,15,3,16,10];return e.push(12),(0,n.isFeatureEnabled)("footprint_chart")&&e.push(17),e}().concat(function(){const e=[8];return s.enabled("japanese_chart_styles")&&(e.push(4,7,5,6),e.push(11)),e}())}},182436:(e,t,i)=>{i.d(t,{NumericFormatter:()=>r});var s=i(960521),n=i(702053);class r{constructor(e){this._precision=e}format(e){return(void 0!==this._precision?e.toFixed(this._precision):r.formatNoE(e)).replace(".",n.formatterOptions.decimalSign)}parse(e){const t=e.replace(n.formatterOptions.decimalSign,".");let i=parseFloat(t);return this._precision&&(i=+i.toFixed(this._precision)),i}static formatNoE(e){if(!Number.isFinite(e))return String(e);const t=new s.Big(e);return t.lt(1)?t.toFixed():t.toString()}}},541346:(e,t,i)=>{i.d(t,{PercentageFormatter:()=>r});var s=i(402084),n=i(31341);class r extends s.PriceFormatter{constructor(e){super(e),this.type="percentage"}state(){const e=s.PriceFormatter.prototype.state.call(this);return e.percent=!0,e}parse(e){return e=e.replace("%",""),super.parse(e)}format(e,t,i,s,r=!0){const a=super.format(e,t,i,s,!1)+"%";return r?(0,n.forceLTRStr)(a):a}static serialize(e){return e.state()}static deserialize(e){return new r(e.priceScale)}}},943994:(e,t,i)=>{i.d(t,{PLACE_HOLDER:()=>a,VolumeFormatter:()=>o});var s=i(444372),n=i(182436),r=i(389137);const a="---";class o{constructor(e){this.type="volume",this._numericFormatter=new n.NumericFormatter,this._fractionalValues=void 0!==e&&e>0,this._precision=e}state(){return{precision:this._precision}}format(e,t){if(!(0,r.isNumber)(e))return a;let n="";return e<0?(n="−",e=-e):e>0&&t&&(n="+"),e>=1e100?s.t(null,void 0,i(343088)):(!this._fractionalValues||e>=995?e=Math.round(e):this._fractionalValues&&(e=+e.toFixed(this._precision)),e<995?n+this._formatNumber(e):e<999995?n+this._formatNumber(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),n+this._formatNumber(e/1e6)+"M"):e<999999999995?(e=1e6*Math.round(e/1e6),n+this._formatNumber(e/1e9)+"B"):(e=1e9*Math.round(e/1e9),n+this._formatNumber(e/1e12)+"T"))}parse(e){if("---"===e)return{
error:"not a number",res:!1,value:NaN};const t={K:1e3,M:1e6,B:1e9,T:1e12},i=e.slice(-1);if(t.hasOwnProperty(i)){const s=this._numericFormatter.parse(e.slice(0,-1));return(0,r.isNumber)(s)?{res:!0,value:s*t[i]}:{error:"not a number",res:!1,value:NaN}}{const t=this._numericFormatter.parse(e);return(0,r.isNumber)(t)?{res:!0,value:t}:{error:"not a number",res:!1,value:NaN}}}static serialize(e){return e.state()}static deserialize(e){return new o(e.precision)}_formatNumber(e){if(this._fractionalValues&&0!==e){const t=14-Math.ceil(Math.log10(e)),i=Math.pow(10,t);e=Math.round(e*i)/i}return this._numericFormatter.format(e).replace(/(\.[1-9]*)0+$/,((e,t)=>t))}}},223699:(e,t,i)=>{i.d(t,{Interval:()=>h,ResolutionKind:()=>r,SpecialResolutionKind:()=>a,isHour:()=>c});const s=/^(\d*)([TSHDWMR])$/,n=/^(\d+)$/;var r,a;!function(e){e.Ticks="ticks",e.Seconds="seconds",e.Minutes="minutes",e.Days="days",e.Weeks="weeks",e.Months="months",e.Range="range",e.Invalid="invalid"}(r||(r={})),function(e){e.Hours="hours"}(a||(a={}));const o={};o[r.Ticks]=1e3,o[r.Seconds]=1e3,o[r.Minutes]=60*o[r.Seconds],o[r.Days]=1440*o[r.Minutes],o[r.Weeks]=7*o[r.Days];const l={T:r.Ticks,S:r.Seconds,D:r.Days,W:r.Weeks,M:r.Months,R:r.Range},u=new Set([r.Ticks,r.Seconds,r.Minutes]);class h{constructor(e,t){this._kind=r.Invalid,this._multiplier=0,e!==r.Invalid&&t>0&&(this._kind=e,this._multiplier=t)}kind(){return this._kind}multiplier(){return this._multiplier}isValid(){return this.kind()!==r.Invalid&&this.multiplier()>0}isDWM(){return this.isValid()&&!this.isRange()&&!this.isIntraday()&&!this.isTicks()}isIntraday(){const e=u.has(this.kind());return this.isValid()&&e}isSeconds(){return this.kind()===r.Seconds}isMinutes(){return this.kind()===r.Minutes}isMinuteHours(){return this.kind()===r.Minutes&&c(this.multiplier())}isDays(){return this.kind()===r.Days}isWeeks(){return this.kind()===r.Weeks}isMonths(){return this.kind()===r.Months}isRange(){return this.kind()===r.Range}isTicks(){return this.kind()===r.Ticks}isTimeBased(){return!this.isRange()}letter(){return this.isValid()&&this.kind()!==r.Minutes?this.kind()[0].toUpperCase():""}value(){return this.isValid()?this.kind()===r.Minutes?this.multiplier()+"":this.multiplier()+this.letter():""}isEqualTo(e){if(!(e instanceof h))throw new Error("Argument is not an Interval");return!(!this.isValid()||!e.isValid())&&(this.kind()===e.kind()&&this.multiplier()===e.multiplier())}inMilliseconds(e=Date.now()){if(!this.isValid()||this.isRange())return NaN;if(this.isMonths()){const t=new Date(e);t.setUTCMonth(t.getUTCMonth()+(this.multiplier()||1));return+t-e}const t=this.multiplier();return o[this.kind()]*t}static isEqual(e,t){return e===t||h.parse(e).isEqualTo(h.parse(t))}static parseExt(e){e=(e+"").toUpperCase().split(",")[0];let t=s.exec(e);return null!==t?"H"===t[2]?{interval:new h(r.Minutes,60*d(t[1])),guiResolutionKind:a.Hours}:{interval:new h(l[t[2]],d(t[1])),guiResolutionKind:l[t[2]]}:(t=n.exec(e),null!==t?{interval:new h(r.Minutes,d(t[1])),guiResolutionKind:r.Minutes}:{interval:new h(r.Invalid,0),
guiResolutionKind:r.Invalid})}static parse(e){return h.parseExt(e).interval}static kind(e){return h.parse(e).kind()}static isValid(e){return h.parse(e).isValid()}static isDWM(e){return h.parse(e).isDWM()}static isIntraday(e){return h.parse(e).isIntraday()}static isSeconds(e){return h.parse(e).isSeconds()}static isMinutes(e){return h.parse(e).isMinutes()}static isMinuteHours(e){return h.parse(e).isMinuteHours()}static isDays(e){return h.parse(e).isDays()}static isWeeks(e){return h.parse(e).isWeeks()}static isMonths(e){return h.parse(e).isMonths()}static isRange(e){return h.parse(e).isRange()}static isTicks(e){return h.parse(e).isTicks()}static isTimeBased(e){return h.parse(e).isTimeBased()}static normalize(e){const t=h.parse(e);return t.isValid()?t.value():null}}function d(e){return 0===e.length?1:parseInt(e,10)}function c(e){return e>=60&&!(e%60)}},824837:(e,t,i)=>{i.d(t,{createWVFromGetterAndSubscription:()=>n});var s=i(129025);function n(e,t){const i=new s.WatchedValue(e()),n={};t.subscribe(n,(()=>{i.setValue(e())}));return i.readonly().spawn((()=>t.unsubscribeAll(n)))}},529426:(e,t,i)=>{function s(e){if(!e)return"";if(["AMEX"].includes(e))return"Arca";if(["NYSE ARCA & MKT"].includes(e))return"NYSE Arca";if(["Cboe BZX"].includes(e))return"Cboe One";if(["FTSEST"].includes(e))return"FTSE ST";const t=/^(CME|COMEX|CBOT|NYMEX)_MINI$/.exec(e);return null!==t?t[1]:e}i.d(t,{redefineExchangeName:()=>s})},339315:(e,t,i)=>{i.r(t),i.d(t,{SERIES_STATUS_TEXT:()=>m,STATUS_DELAYED:()=>d,STATUS_DELAYED_STREAMING:()=>c,STATUS_EOD:()=>u,STATUS_ERROR:()=>b,STATUS_INVALID_SYMBOL:()=>o,STATUS_LOADING:()=>r,STATUS_NO_BARS:()=>_,STATUS_OFFLINE:()=>s,STATUS_PULSE:()=>h,STATUS_READY:()=>a,STATUS_REPLAY:()=>y,STATUS_RESOLVING:()=>n,STATUS_SNAPSHOT:()=>l,STYLE_AREA:()=>g,STYLE_BARS:()=>S,STYLE_BASELINE:()=>I,STYLE_CANDLES:()=>p,STYLE_COLUMNS:()=>E,STYLE_HEIKEN_ASHI:()=>W,STYLE_HILO:()=>T,STYLE_HLC_AREA:()=>A,STYLE_HOLLOW_CANDLES:()=>L,STYLE_KAGI:()=>f,STYLE_LINE:()=>v,STYLE_LINE_WITH_MARKERS:()=>R,STYLE_PB:()=>k,STYLE_PNF:()=>C,STYLE_RANGE:()=>V,STYLE_RENKO:()=>w,STYLE_SHORT_NAMES:()=>G,STYLE_STEPLINE:()=>B,SYMBOL_STRING_DATA:()=>N});const s=0,n=1,r=2,a=3,o=4,l=5,u=6,h=7,d=8,c=9,_=10,y=11,b=12,m={[s]:"connecting",[n]:"loading",[r]:"loading",[a]:"realtime",[o]:"invalid",[l]:"snapshot",[u]:"endofday",[h]:"endofday",[d]:"delayed",[c]:"delayed_streaming",[_]:"forbidden",[y]:"replay",[b]:"error"},S=0,p=1,v=2,g=3,w=4,f=5,C=6,k=7,W=8,L=9,I=10,V=11,T=12,E=13,R=14,B=15,A=16,G={0:"bar",1:"candle",9:"hollowCandle",2:"line",14:"lineWithMarkers",15:"stepline",3:"area",16:"hlcArea",4:"renko",7:"pb",5:"kagi",6:"pnf",8:"ha",10:"baseline",11:"range",12:"hilo",13:"column",17:"volFootprint"},N={4:{type:"BarSetRenko@tv-prostudies",basicStudyVersion:64},7:{type:"BarSetPriceBreak@tv-prostudies",basicStudyVersion:34},5:{type:"BarSetKagi@tv-prostudies",basicStudyVersion:34},6:{type:"BarSetPnF@tv-prostudies",basicStudyVersion:34},8:{type:"BarSetHeikenAshi@tv-basicstudies",basicStudyVersion:60},11:{type:"BarSetRange@tv-basicstudies",basicStudyVersion:72},17:{
type:"Footprint@tv-volumebyprice",basicStudyVersion:104}}},444331:(e,t,i)=>{i.r(t),i.d(t,{actualSymbol:()=>pe,chartStyleStudyId:()=>Y,createSeriesFormatter:()=>j,displayedSymbolExchange:()=>Se,displayedSymbolName:()=>me,extractLineToolSymbolFromSymbolInfo:()=>de,extractSymbolNameFromSymbolInfo:()=>he,getChartStyleByResolution:()=>U,getDefaultStyle:()=>P,getLastUsedRawDataStyle:()=>x,getLastUsedSingleValueBasedStyle:()=>D,getLastUsedStyle:()=>M,getSeriesDisplayErrorWV:()=>Te,getSeriesPriceFormattingState:()=>z,getSourceForEconomySymbol:()=>ye,getSymbolExchange:()=>Le,getTranslatedChartStyleName:()=>L,hasProjection:()=>K,hasVolume:()=>ke,isCloseBasedSymbol:()=>we,isConvertedToOtherCurrency:()=>ee,isConvertedToOtherUnit:()=>ne,isEconomicSymbol:()=>We,isFutureContinuousSymbolWithBackajustment:()=>Ie,isFuturesContractSymbol:()=>Ve,isMeasureUnitSymbol:()=>fe,isPriceSourceStyle:()=>$,isRangeBasedStyle:()=>V,isRangeStyle:()=>E,isRawDataStyle:()=>G,isRegularSessionId:()=>ge,isRequiringRestartSeriesStyles:()=>I,isSingleValueBasedStyle:()=>A,isTimeBasedStyle:()=>R,isValidStyle:()=>B,isVolumeWeightedStyle:()=>O,measureUnitId:()=>Ce,preparePriceAxisProperties:()=>q,proSymbol:()=>ve,setLastUsedRawDataStyle:()=>F,setLastUsedStyle:()=>N,styleChangeRequiresRestart:()=>T,symbolBaseCurrency:()=>Q,symbolCurrency:()=>Z,symbolCurrencyConvertible:()=>X,symbolCurrentContract:()=>ae,symbolHasEconomicEvents:()=>ue,symbolHasPreOrPostMarket:()=>oe,symbolHasSeveralSessions:()=>le,symbolOriginalCurrency:()=>J,symbolOriginalUnit:()=>se,symbolTitle:()=>be,symbolTitleSeparator:()=>_e,symbolToSaveInState:()=>ce,symbolUnit:()=>ie,symbolUnitConvertible:()=>te,symbolUnitConvertibleGroupsIfExist:()=>re});var s=i(444372),n=i(62802),r=i(638456),a=i(519073),o=i(339315),l=i(223699),u=i(402084),h=i(77122),d=i(943994),c=i(541346),_=i(181728),y=i(66732),b=i(824837),m=i(529426);const S=h.enabled("pay_attention_to_ticker_not_symbol"),p=h.enabled("uppercase_instrument_names"),v=h.enabled("charting_library_single_symbol_request"),g=h.enabled("use_ticker_on_symbol_info_update"),w=h.enabled("hide_object_tree_and_price_scale_exchange_label"),f=[4,5,6,7,8],C=[4,5,6,7,11],k=[0,1,9,2,14,15,3,16,10,8,12,13],W=[2,14,15,10,3,13];function L(e){return{0:s.t(null,void 0,i(16812)),1:s.t(null,void 0,i(463528)),2:s.t(null,void 0,i(301277)),14:s.t(null,void 0,i(938397)),15:s.t(null,void 0,i(79511)),3:s.t(null,void 0,i(542097)),16:s.t(null,void 0,i(134911)),9:s.t(null,void 0,i(661582)),10:s.t(null,void 0,i(117712)),12:s.t(null,void 0,i(631994)),13:s.t(null,void 0,i(636018)),4:s.t(null,void 0,i(20801)),7:s.t(null,void 0,i(563492)),5:s.t(null,void 0,i(292901)),6:s.t(null,void 0,i(99969)),11:s.t(null,void 0,i(490357)),8:s.t(null,void 0,i(240530)),17:s.t(null,void 0,i(178560))}[e]}function I(e){return-1!==f.indexOf(e)}function V(e){return-1!==C.indexOf(e)}function T(e,t){return!E(e)&&!E(t)&&!(e===t||!I(e)&&!I(t))}function E(e){return 11===e}function R(e){return-1!==k.indexOf(e)}function B(e){return V(e)||R(e)}function A(e){switch(e){case 3:case 10:case 2:case 14:case 15:case 13:
return!0;default:return!1}}function G(e){return!o.SYMBOL_STRING_DATA[e]}function N(e,t){B(e)&&(11!==e&&n.setValue("chart.lastUsedStyle",e),G(e)&&F(e),we(t)&&A(e)&&n.setValue("chart.lastUsedSingleValueBasedStyle",e))}function F(e){n.setValue("chart.rawDataStyle",e)}function M(){const e=n.getInt("chart.lastUsedStyle");return void 0===e?1:e}function D(){const e=n.getInt("chart.lastUsedSingleValueBasedStyle");return void 0===e?14:e}function x(){return n.getInt("chart.rawDataStyle",1)}function P(e){return e?11:1}function U(e,t){const i=E(t),s=l.Interval.isRange(e);return!i&&s?P(!0):i&&!s?P(!1):t}function O(e){return 1===e||0===e||13===e}function Y(e,t){const i=o.SYMBOL_STRING_DATA[e];return void 0===i?null:t?`${i.type}-${i.basicStudyVersion}`:i.type}function q(e){const t=e.priceAxisProperties,i=t.lockScale.value(),s=6===e.style.value();(s||i)&&(t.log.setValue(!1),t.percentage.setValue(!1)),t.logDisabled.setValue(!(!s&&!i)),t.percentageDisabled.setValue(!(!s&&!i))}const H=[4,7,5,6];function K(e){return-1!==H.indexOf(e)}function $(e){return W.includes(e)}function z(e,t="default",i=!1){let s,n,r,a=100,o=1;if("default"===t)null!=e&&(({pricescale:a,minmov:o,minmove2:n,fractional:s}=e),r=e.variable_tick_size||void 0);else{let e=t.split(",");3!==e.length&&(e=["100","1","false"]),a=parseInt(e[0]),o=parseInt(e[1]),s="true"===e[2]}return i&&(o=1),{priceScale:a,minMove:o,fractional:s,minMove2:n,variableMinTick:r,ignoreMinMove:i}}function j(e,t,i=!1){if("default"===t&&null!=e){const t=e.formatter||e.format;if("volume"===t)return new d.VolumeFormatter(2);if("percent"===t)return new c.PercentageFormatter(e.pricescale)}const{priceScale:s,minMove:n,fractional:r,minMove2:a,variableMinTick:o}=z(e,t,i);return new u.PriceFormatter(s,n,r,a,o,i)}function X(e){return null!==e&&"spread"!==e.type}function Z(e,t,i){if(null===e)return null;const s=!t||i?e.currency_id:e.currency_code;return void 0===s||""===s||"pct"===s?null:s}function J(e,t){const i=t?e.original_currency_code:e.original_currency_id;return"pct"===i?null:null!=i?i:Z(e,t)}function Q(e){return e.base_currency_id||null}function ee(e){return!(null===e||!X(e))&&(void 0!==e.original_currency_id&&e.original_currency_id!==e.currency_id)}function te(e,t){return t&&null!==e&&"spread"!==e.type}function ie(e,t){if(null===e||!t)return null;const i=e.unit_id;return void 0===i||""===i?null:i}function se(e,t){return t?e.original_unit_id||ie(e,t):null}function ne(e,t){return!(null===e||!te(e,t))&&(void 0!==e.original_unit_id&&e.original_unit_id!==e.unit_id)}function re(e,t){return null!==e&&te(e,t)?e.unit_conversion_types||null:[]}function ae(e){return"futures"===e.type&&e.front_contract||null}function oe(e){return null!==e&&void 0!==e.subsessions&&e.subsessions.some((e=>"premarket"===e.id||"postmarket"===e.id))}function le(e){return null!==e&&void 0!==e.subsessions&&e.subsessions.filter((e=>!e.private)).length>1}function ue(e){return null!==e&&("forex"===e.type||(0,_.isCFDSymbol)(e.type,e.typespecs)||(0,a.hasCryptoTypespec)(e.typespecs||[]))}function he(e,t,i,s){
let n=e&&(i&&e.pro_name||e.full_name||e.name);return v&&t?n=t:(g||!s&&S)&&e&&e.ticker&&(n=e.ticker),p&&n&&(n=n.toUpperCase()),n}function de(e,t){return he(e,null,!0,!0)||t}function ce(e,t){var i,s;return e&&null!==(s=null!==(i=e.ticker)&&void 0!==i?i:e.pro_name)&&void 0!==s?s:t}const _e="·";function ye(e,t){var i,s;return We(e)&&null!==(s=null===(i=e.source2)||void 0===i?void 0:i.description)&&void 0!==s?s:null}function be(e,t,i="exchange"){var s;const n=null!==(s=ye(e))&&void 0!==s?s:e[i];return t||w?e.name:`${e.name} ${_e} ${n}`}function me(e){let t=e&&(ae(e)||e.name)||"";return t.length>40&&(t=t.substring(0,37)+"..."),t.trim()}function Se(e){const t=e?e.exchange:"";return p?t.toUpperCase():t}function pe(e,t){return null!==e?e.full_name:t}function ve(e,t){var i;return null!==(i=null==e?void 0:e.pro_name)&&void 0!==i?i:t}function ge(e){return"regular"===e||"us_regular"===e}function we(e){return"c"===(null==e?void 0:e.visible_plots_set)}function fe(e){return null!==e&&("unit"===e.measure&&null!==Ce(e))}function Ce(e){var t;return null!==(t=null==e?void 0:e.value_unit_id)&&void 0!==t?t:null}function ke(e){return void 0!==e.visible_plots_set&&"ohlcv"===e.visible_plots_set}function We(e){return null!==e&&"economic"===e.type}function Le(e){const t=ye(e);if(null!==t)return t;return(0,r.onWidget)()||"forex"===e.type?e.exchange:(0,m.redefineExchangeName)(e.listed_exchange)}function Ie(e){var t;return null!==e&&"futures"===e.type&&Boolean(e.has_backadjustment&&(null===(t=e.typespecs)||void 0===t?void 0:t.includes("continuous")))}function Ve(e){var t;return null!==e&&"futures"===e.type&&!Boolean(null===(t=e.typespecs)||void 0===t?void 0:t.includes("continuous"))}function Te(e){return(0,y.combine)(((t,i)=>{switch(t){case 4:{const t=e.seriesErrorMessage();return null!==t&&("resolution_not_entitled"===t||"custom_resolution"===t||"seconds_not_entitled"===t||"ticks_not_entitled"===t||t.startsWith("study_not_auth:"))?null:"invalid_symbol"}case 1:case 2:return null;default:if(i)return"no_data"}return null}),(0,b.createWVFromGetterAndSubscription)((()=>e.status()),e.onStatusChanged()).ownership(),(0,b.createWVFromGetterAndSubscription)((()=>!e.bars().size()&&!e.isInReplay()),e.dataEvents().dataUpdated()).ownership(),(0,b.createWVFromGetterAndSubscription)((()=>({})),e.model().onChartThemeLoaded()).ownership())}}}]);